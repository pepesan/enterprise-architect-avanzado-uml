@startuml
title Biblioteca en línea — Diagrama de Objetos (ejemplo simple)

/' Objetos (instancias) '/

object "Usuario u1" as u1 {
  id = 3f1a1b4e-8e92-4a7f-9a11-0c2a4f1c8a01
  email = juana@example.com
  nombre = Juana Pérez
  fecha_alta = 2024-06-15
  activo = true
}

object "Libro l1" as l1 {
  isbn = 978-84-376-0494-7
  titulo = Patrones de Diseño
  autor = GoF
  anio_publicacion = 1994
}

object "Ejemplar e1" as e1 {
  id = 7c9e6679-7425-40de-944b-e07fc1f90ae7
  codigo_inventario = INV-0001
  estado = PRESTADO
  libro_isbn = 978-84-376-0494-7
}

object "Ejemplar e2" as e2 {
  id = 5a1fd2a7-6b2b-4d8e-9d1b-b2b0fb2c1c02
  codigo_inventario = INV-0002
  estado = DISPONIBLE
  libro_isbn = 978-84-376-0494-7
}

object "Prestamo p1" as p1 {
  id = 0f12a8ad-3a1b-4b8b-9d6a-1f2e3d4c5b6a
  usuario_id = 3f1a1b4e-8e92-4a7f-9a11-0c2a4f1c8a01
  ejemplar_id = 7c9e6679-7425-40de-944b-e07fc1f90ae7
  fecha_solicitud = 2025-09-09T16:40:00
  fecha_inicio = 2025-09-10
  fecha_vencimiento = 2025-10-10
  fecha_devolucion = null
  estado = ACTIVO
}

object "Prestamo p2" as p2 {
  id = 6bb3b9fa-4f0a-4272-a4b9-3b1a2c4d5e6f
  usuario_id = 3f1a1b4e-8e92-4a7f-9a11-0c2a4f1c8a01
  ejemplar_id = 5a1fd2a7-6b2b-4d8e-9d1b-b2b0fb2c1c02
  fecha_solicitud = 2025-07-01T10:15:00
  fecha_inicio = 2025-07-02
  fecha_vencimiento = 2025-07-30
  fecha_devolucion = 2025-07-20
  estado = DEVUELTO
}

object "Notificacion n1" as n1 {
  id = 9e1d3c7b-2a4f-4b6c-8d9e-1a2b3c4d5e6f
  prestamo_id = 0f12a8ad-3a1b-4b8b-9d6a-1f2e3d4c5b6a
  destinatario_email = juana@example.com
  medio = EMAIL
  tipo = recordatorio_vencimiento
  fecha_programada = 2025-10-05T09:00:00
  fecha_envio = null
  contenido = "Tu préstamo vence el 2025-10-10."
}

object "Notificacion n2" as n2 {
  id = 3a2b1c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d
  prestamo_id = 6bb3b9fa-4f0a-4272-a4b9-3b1a2c4d5e6f
  destinatario_email = juana@example.com
  medio = EMAIL
  tipo = confirmacion_devolucion
  fecha_programada = 2025-07-20T11:00:00
  fecha_envio = 2025-07-20T11:01:12
  contenido = "Hemos registrado tu devolución. ¡Gracias!"
}

/' Enlaces para visualizar relaciones entre instancias '/
u1 -- p1 : usuario_id
u1 -- p2 : usuario_id

l1 -- e1 : libro_isbn
l1 -- e2 : libro_isbn

e1 -- p1 : ejemplar_id
e2 -- p2 : ejemplar_id

p1 -- n1 : prestamo_id
p2 -- n2 : prestamo_id

note bottom of p1
  Cumple reglas:
  - fecha_vencimiento (2025-10-10) > fecha_inicio (2025-09-10)
  - e1 solo tiene un préstamo ACTIVO
end note

note bottom of p2
  Estado DEVUELTO; e2 disponible de nuevo.
end note
@enduml
